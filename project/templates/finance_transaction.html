{% extends "layout.html" %}

{% block title %}
    Finance
{% endblock %}

{% block main %}
    <form action="/finance/{{ transaction[0].finance_id }}/{{ transaction[0].id }}" method="post">

        <div class="form-group">
            <label class="col-form-label font-weight-bold">Status</label>
            {% if transaction[0].status == "Draft" %}
                <p class="form-control-plaintext badge badge-pill badge-secondary">{{ transaction[0].status }}</p>
            {% elif transaction[0].status == "New" %}
                <p class="form-control-plaintext badge badge-pill badge-primary">{{ transaction[0].status }}</p>
            {% elif transaction[0].status == "Review" %}
                <p class="form-control-plaintext badge badge-pill badge-warning">{{ transaction[0].status }}</p>
            {% elif transaction[0].status == "Accepted" %}
                <p class="form-control-plaintext badge badge-pill badge-success">{{ transaction[0].status }}</p>
            {% elif transaction[0].status == "Denied" %}
                <p class="form-control-plaintext badge badge-pill badge-danger">{{ transaction[0].status }}</p>
            {% endif %}
        </div>

        <div class="form-group">
            <label class="col-form-label font-weight-bold">Date</label>
            <input name="date" type="date" class="form-control" value="{{ transaction[0].date }}">
        </div>

        <div class="form-group">
            <label class="col-form-label font-weight-bold">Partner</label>
            <input name="partner" type="text" class="form-control" value="{{ transaction[0].partner }}">
        </div>

        <div class="form-group">
            <label class="col-form-label font-weight-bold">Expense</label>
            <input name="expense" type="text" class="form-control" value="{{ transaction[0].expense }}">
        </div>

        <div class="form-group">
            <label class="col-form-label font-weight-bold">Amount</label>
            <input name="amount" type="number" step="0.01" min="0" class="form-control" value="{{ transaction[0].amount }}">
        </div>

        <div>
            <button class="btn btn-primary" type="submit">Save</button>
            {% if transaction[0].status == "Draft" %}
                <button class="btn btn-info center-block" type="button" onclick="myTransactionSubmit({{ transaction[0].finance_id }}, {{ transaction[0].id }})">Submit</button>
            {% elif transaction[0].status == "New" %}
                <button class="btn btn-info center-block" type="button" onclick="myTransactionSubmit({{ transaction[0].finance_id }}, {{ transaction[0].id }})">Unsubmit</button>
            {% endif %}
            <a class="btn btn-success btn-sm" href="/finance/{{ transaction[0].finance_id }}">Back</a>
        </div>

        {% if session.role == "Admin" %}
        <div>
            <button class="btn btn-success center-block" type="button" onclick="myTransactionStatus({{ transaction[0].finance_id }}, {{ transaction[0].id }}, 'Accepted')">Accept</button>
            <button class="btn btn-danger center-block" type="button" onclick="myTransactionStatus({{ transaction[0].finance_id }}, {{ transaction[0].id }}, 'Denied')">Deny</button>
        </div>
        {% endif %}
        <div>
            <button class="btn btn-danger center-block" type="button" onclick="myTransactionDelete({{ transaction[0].finance_id }}, {{ transaction[0].id }})">Delete</button>
        </div>
    </form>
    {% if session.role == "Admin" %}
        
        </script>
    {% endif %}
{% endblock %}