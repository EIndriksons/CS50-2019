{% extends "layout.html" %}

{% block title %}
    Finance
{% endblock %}

{% block main %}
    <div class="d-flex justify-content-center">
        <form action="/finance/{{ transaction.finance_id }}/{{ transaction.id }}" method="post">

            <div class="form-group row">
                <div class="col-sm-4">
                    <label class="col-form-label font-weight-bold">Status</label>
                </div>
                <div class="col-sm-8">
                    {% if transaction.status == "Draft" %}
                        <p class="form-control-plaintext badge badge-pill badge-secondary">{{ transaction.status }}</p>
                    {% elif transaction.status == "New" %}
                        <p class="form-control-plaintext badge badge-pill badge-primary">{{ transaction.status }}</p>
                    {% elif transaction.status == "Review" %}
                        <p class="form-control-plaintext badge badge-pill badge-warning">{{ transaction.status }}</p>
                    {% elif transaction.status == "Accepted" %}
                        <p class="form-control-plaintext badge badge-pill badge-success">{{ transaction.status }}</p>
                    {% elif transaction.status == "Denied" %}
                        <p class="form-control-plaintext badge badge-pill badge-danger">{{ transaction.status }}</p>
                    {% endif %}
                </div>
            </div>

            <div class="form-group row">
                <div class="col-auto">
                    <label class="col-form-label font-weight-bold">Date</label>
                    <input name="date" type="date" class="form-control" value="{{ transaction.date }}">
                </div>
            </div>

            <div class="form-group row">
                <div class="col-auto">
                    <label class="col-form-label font-weight-bold">Partner</label>
                    <input name="partner" type="text" class="form-control" value="{{ transaction.partner }}">
                </div>
            </div>

            <div class="form-group row">
                <div class="col-auto">
                    <label class="col-form-label font-weight-bold">Document Type</label>
                    <input name="partner" type="text" class="form-control" value="{{ transaction.document_type }}">
                </div>
            </div>

            <div class="form-group row">
                <div class="col-auto">
                    <label class="col-form-label font-weight-bold">Document Number</label>
                    <input name="partner" type="text" class="form-control" value="{{ transaction.document_no }}">
                </div>
            </div>

            <div class="form-group row">
                <div class="col-auto">
                    <label class="col-form-label font-weight-bold">Expense</label>
                    <input name="expense" type="text" class="form-control" value="{{ transaction.expense }}">
                </div>
            </div>

            <div class="form-group row">
                <div class="col-auto">
                    <label class="col-form-label font-weight-bold">Amount €</label>
                    <input name="amount" type="number" step="0.01" min="0" class="form-control" value="{{ transaction.amount }}">
                </div>
            </div>

            {% if session.role == "Admin" %}
                <div class="form-group row">
                    <div class="col-auto">
                        <label class="col-form-label font-weight-bold">Accepted €</label>
                        <input name="amount" type="number" step="0.01" min="0" class="form-control" value="{{ transaction.amount }}">
                    </div>
                </div>
            {% endif %}

            <div class="form-group row">
                <div class="col-auto mr-auto">
                    <button class="btn btn-primary" type="submit">Save</button>
                    {% if transaction.status == "Draft" %}
                        <button class="btn btn-info center-block" type="button" onclick="myTransactionSubmit({{ transaction.finance_id }}, {{ transaction.id }})">Submit</button>
                    {% elif transaction.status == "New" %}
                        <button class="btn btn-info center-block" type="button" onclick="myTransactionSubmit({{ transaction.finance_id }}, {{ transaction.id }})">Unsubmit</button>
                    {% endif %}
                </div>
                <div class="col-auto">
                    <a class="btn btn-success center-block" href="/finance/{{ transaction.finance_id }}">Back</a>
                </div>
            </div>

            {% if session.role == "Admin" %}
            <div class="form-group row">
                <div class="col-auto">
                    <button class="btn btn-success center-block" type="button" onclick="myTransactionStatus({{ transaction.finance_id }}, {{ transaction.id }}, 'Accepted')">Accept</button>
                    <button class="btn btn-danger center-block" type="button" onclick="myTransactionStatus({{ transaction.finance_id }}, {{ transaction.id }}, 'Denied')">Deny</button>
                </div>
            </div>
            {% endif %}
            <div class="form-group row">
                <div class="col-auto">
                    <button class="btn btn-danger center-block" type="button" onclick="myTransactionDelete({{ transaction.finance_id }}, {{ transaction.id }})">Delete</button>
                </div>
            </div>
        </form>
    </div>
{% endblock %}